---
apiVersion: v1
kind: ConfigMap
metadata:
  name: immich
  namespace: home
data:
  TZ: ${TZ}
  DB_DATABASE_NAME: immich
  DB_HOSTNAME: postgres-rw.databases.svc.cluster.local
  DB_PORT: "5432"
  DISABLE_REVERSE_GEOCODING: "true"
  ENABLE_MAPBOX: "false"
  LOG_LEVEL: simple
  NODE_ENV: production
  REDIS_HOSTNAME: redis.databases.svc.cluster.local
  REDIS_PORT: "6379"
  REDIS_DBINDEX: "0"
  IMMICH_WEB_URL: http://immich-web.home.svc.cluster.local:3000
  IMMICH_SERVER_URL: http://immich-server.home.svc.cluster.local:3001
  IMMICH_MACHINE_LEARNING_URL: http://immich-machine-learning.home.svc.cluster.local:3003
  UPLOAD_LOCATION: /usr/src/app/upload
  OAUTH_ENABLED: "true"
  OAUTH_ISSUER_URL: https://auth.${CLUSTER_DOMAIN}/.well-known/openid-configuration
  OAUTH_CLIENT_ID: immich
  OAUTH_CLIENT_SECRET: ${SECRET_IMMICH_OAUTH_CLIENT_SECRET}
  OAUTH_AUTO_REGISTER: "true"
  OAUTH_BUTTON_TEXT: Login with Authelia
