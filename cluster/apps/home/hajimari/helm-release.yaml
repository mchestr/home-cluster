---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hajimari
  namespace: default
spec:
  interval: 5m
  chart:
    spec:
      chart: hajimari
      version: 1.2.0
      sourceRef:
        kind: HelmRepository
        name: hajimari-charts
        namespace: flux-system
      interval: 5m
  install:
    createNamespace: true
    remediation:
      retries: 3
  upgrade:
    remediation:
      retries: 3
  values:
    image:
      repository: ghcr.io/toboshii/hajimari
      tag: v0.2.0
    hajimari:
      defaultEnable: false
      namespaceSelector:
        any: true
      name: "you"
      customApps:
        - name: LochNAS
          icon: nas
          url: https://${NAS_ADDR}:5001
        - name: Plex
          icon: plex
          url: https://app.plex.tv
      groups:
        - name: Cluster
          links:
            - name: Renovate
              url: "https://github.com/mchestr/cluster-k3s/issues/1"
            - name: Repository
              url: "https://github.com/mchestr/cluster-k3s"
        - name: k8s@Home
          links:
            - name: Awesome Home Kubernetes
              url: "https://github.com/k8s-at-home/awesome-home-kubernetes"
            - name: Charts
              url: "https://github.com/k8s-at-home/charts/tree/master/charts"
            - name: Search
              url: https://sourcegraph.com/search?q=%28repo%3A%5Egithub%5C.com%2Fams0%2Francher-home%24+or+repo%3A%5Egithub%5C.com%2Fangelnu%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fanthr76%2Finfra%24+or+repo%3A%5Egithub%5C.com%2Fauricom%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fbillimek%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fbjw-s%2Fhome-ops%24+or+repo%3A%5Egithub%5C.com%2Fblackjid%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fbudimanjojo%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fbuvis-net%2Fclusters%24+or+repo%3A%5Egithub%5C.com%2Fcarpenike%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fcbirkenbeul%2Fk3s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fcharlie-haley%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2FDiaoul%2Fhome-ops%24+or+repo%3A%5Egithub%5C.com%2Fdirtycajunrice%2Fgitops%24+or+repo%3A%5Egithub%5C.com%2Feyulf%2Fhomelab%24+or+repo%3A%5Egithub%5C.com%2Ffabito%2Fhtk8s%24+or+repo%3A%5Egithub%5C.com%2Ffobiat%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fgeekdojo-ofc%2Frpi-talos-netboot%24+or+repo%3A%5Egithub%5C.com%2Fh3mmy%2Fbloopysphere%24+or+repo%3A%5Egithub%5C.com%2Fjr0dd%2Fhome-ops%24+or+repo%3A%5Egithub%5C.com%2Fkhuedoan%2Fhomelab%24+or+repo%3A%5Egithub%5C.com%2Fkitos9112%2Fk8s-home%24+or+repo%3A%5Egithub%5C.com%2Flanquarden%2Froci-gitops%24+or+repo%3A%5Egithub%5C.com%2Flib42%2Fheqet%24+or+repo%3A%5Egithub%5C.com%2Flocmai%2Fhumble%24+or+repo%3A%5Egithub%5C.com%2Fmcfio%2FGitOps%24+or+repo%3A%5Egithub%5C.com%2Fnarze%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fnicholaswilde%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fnpawelek%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fonedr0p%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fphybros%2Fk3s-cluster%24+or+repo%3A%5Egithub%5C.com%2Frafaribe%2Fhome-ops%24+or+repo%3A%5Egithub%5C.com%2Frogerrum%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Frust84%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Frwaltr%2Finfra%24+or+repo%3A%5Egithub%5C.com%2Fsamip5%2Fk8s-cluster%24+or+repo%3A%5Egithub%5C.com%2Fthaum-xyz%2Fankhmorpork%24+or+repo%3A%5Egithub%5C.com%2Ftimtorchen%2Fpi-cluster%24+or+repo%3A%5Egithub%5C.com%2Ftoboshii%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Ftodaywasawesome%2Fatomic-cluster%24+or+repo%3A%5Egithub%5C.com%2FTruxnell%2Fhome-cluster%24+or+repo%3A%5Egithub%5C.com%2Fvaskozl%2Fhome-infra%24+or+repo%3A%5Egithub%5C.com%2FWRMilling%2Fk3s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fxunholy%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fzacheryph%2Fk8s-gitops%24+or+repo%3A%5Egithub%5C.com%2Fzbigniewzolnierowicz%2Fk8s-home%24+or+repo%3A%5Egithub%5C.com%2Fzenxedo%2Fk3s-gitops%24%29+count%3A2000&patternType=literal
    ingress:
      main:
        enabled: true
        ingressClassName: "traefik"
        annotations:
          cert-manager.io/cluster-issuer: "letsencrypt-production"
          traefik.ingress.kubernetes.io/router.entrypoints: "websecure"
        hosts:
          - host: "home.${CLUSTER_DOMAIN}"
            paths:
              - path: /
                pathType: Prefix
        tls:
          - hosts:
              - "home.${CLUSTER_DOMAIN}"
            secretName: "hajimari-tls"
    persistence:
      data:
        enabled: true
        existingClaim: hajimari-config
    podAnnotations:
      configmap.reloader.stakater.com/reload: "hajimari-settings"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        memory: 256Mi
